(this["webpackJsonpimage-community"]=this["webpackJsonpimage-community"]||[]).push([[0],{55:function(e,t,n){},56:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var i=n(2),a=n.n(i),r=n(33),c=n.n(r),o=(n(55),n(56),n(35)),s=n(36),u=n(32),l=n(46),d=n(19),j=n(7),b=n(70),p=n(69),f=n(13),g=n(21),x=(n(57),n(66),n(67),{apiKey:"AIzaSyAY6yGELmDWlv5Yn-5xlAfHA_wJ25AW5w0",authDomain:"image-community-9d52d.firebaseapp.com",projectId:"image-community-9d52d",storageBucket:"image-community-9d52d.appspot.com",messagingSenderId:"759234527520",appId:"1:759234527520:web:d271be62029540ea49d745",measurementId:"G-VQGNGM4BS6"});g.a.initializeApp(x);var h,m,O,_,v,C=x.apiKey,w=g.a.auth(),E=g.a.firestore(),y=g.a.storage(),k="LOG_OUT",z="GET_USER",F="SET_USER",P=Object(b.a)(k,(function(e){return{user:e}})),S=(Object(b.a)(z,(function(e){return{user:e}})),Object(b.a)(F,(function(e){return{user:e}}))),T=Object(p.a)((h={},Object(j.a)(h,F,(function(e,t){return Object(f.b)(e,(function(e){!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),document.cookie="".concat(e,"=").concat(t,"; expires=").concat(i.toUTCString())}("is_login","success"),e.user=t.payload.user,e.is_login=!0}))})),Object(j.a)(h,k,(function(e,t){return Object(f.b)(e,(function(e){!function(e){var t=new Date("2020=01=01").toUTCString();console.log(t),document.cookie=e+"=; expires="+t}("is_login"),e.user=null,e.is_login=!1}))})),Object(j.a)(h,z,(function(e,t){return Object(f.b)(e,(function(e){}))})),h),{user:null,is_login:!1}),D=function(e,t,n){return function(i,a,r){var c=r.history;w.createUserWithEmailAndPassword(e,t).then((function(t){console.log(t),w.currentUser.updateProfile({displayName:n}).then((function(){i(S({user_name:n,id:e,user_profile:"",uid:t.user.uid})),c.push("/")})).catch((function(e){console.log(e)}))})).catch((function(e){var t=e.code,n=e.message;console.log(t,n)}))}},I=function(e,t){return function(n,i,a){var r=a.history;w.setPersistence(g.a.auth.Auth.Persistence.SESSION).then((function(i){w.signInWithEmailAndPassword(e,t).then((function(t){console.log(t),n(S({user_name:t.user.displayName,id:e,user_profile:"",uid:t.user.uid})),r.push("/")})).catch((function(e){console.log(e.code,e.message)}))}))}},A=function(){return function(e,t,n){n.history;w.onAuthStateChanged((function(t){e(t?S({user_name:t.displayName,user_profile:"",id:t.email,uid:t.uid}):P())}))}},N=function(){return function(e,t,n){var i=n.history;w.signOut().then((function(){e(P()),i.replace("/")}))}},L=n(41),U=n(4),B=n(24),M=n.n(B),Y="UPLOADING",R="UPLOAD_IMAGE",G="SET_PREVIEW",V=Object(b.a)(Y,(function(e){return{uploading:e}})),W=Object(b.a)(R,(function(e){return{image_url:e}})),Z=Object(b.a)(G,(function(e){return{preview:e}})),X=Object(p.a)((m={},Object(j.a)(m,R,(function(e,t){return Object(f.a)(e,(function(e){e.image_url=t.payload.image_url,e.uploading=!1}))})),Object(j.a)(m,Y,(function(e,t){return Object(f.a)(e,(function(e){e.uploading=t.payload.uploading}))})),Object(j.a)(m,G,(function(e,t){return Object(f.a)(e,(function(e){e.preview=t.payload.preview}))})),m),{image_url:"http://via.placeholder.com/400x300",uploading:!1,preview:null}),H={uploadImage:W,uploadImageFB:function(e){return function(t,n,i){i.history;t(V(!0)),y.ref("image/".concat(e.name)).put(e).then((function(e){console.log(e),e.ref.getDownloadURL().then((function(e){t(W(e)),console.log(e)}))}))}},setPreview:Z},J="SET_POST",K="ADD_POST",q="EDIT_POST",Q="LOADING",$=Object(b.a)(J,(function(e,t){return{post_list:e,paging:t}})),ee=Object(b.a)(K,(function(e){return{post:e}})),te=Object(b.a)(q,(function(e,t){return{post_id:e,post:t}})),ne=Object(b.a)(Q,(function(e){return{is_loading:e}})),ie={image_url:"https://mean0images.s3.ap-northeast-2.amazonaws.com/4.jpeg",contents:"",comment_cnt:0,insert_dt:M()().format("YYYY-MM-DD hh:mm:ss")},ae=Object(p.a)((O={},Object(j.a)(O,J,(function(e,t){return Object(f.b)(e,(function(e){var n;(n=e.list).push.apply(n,Object(L.a)(t.payload.post_list)),e.list=e.list.reduce((function(e,t){return-1===e.findIndex((function(e){return e.id===t.id}))?[].concat(Object(L.a)(e),[t]):(e[e.findIndex((function(e){return e.id===t.id}))]=t,e)}),[]),t.payload.paging&&(e.paging=t.payload.paging),e.is_loading=!1}))})),Object(j.a)(O,K,(function(e,t){return Object(f.b)(e,(function(e){e.list.unshift(t.payload.post)}))})),Object(j.a)(O,q,(function(e,t){return Object(f.b)(e,(function(e){var n=e.list.findIndex((function(e){return e.id===t.payload.post_id}));e.list[n]=Object(U.a)(Object(U.a)({},e.list[n]),t.payload.post)}))})),Object(j.a)(O,Q,(function(e,t){return Object(f.b)(e,(function(e){e.is_loading=t.payload.is_loading}))})),O),{list:[],paging:{start:null,next:null,size:3},is_loading:!1}),re={setPost:$,addPost:ee,editPost:te,getPostFB:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return function(n,i,a){a.history;var r=i().post.paging;if(!r.start||r.next){n(ne(!0));var c=E.collection("post").orderBy("insert_dt","desc");e&&(c=c.startAt(e)),c.limit(t+1).get().then((function(e){var i=[],a={start:e.docs[0],next:e.docs.length===t+1?e.docs[e.docs.length-1]:null,size:t};e.forEach((function(e){var t=e.data(),n=Object.keys(t).reduce((function(e,n){return-1!==n.indexOf("user_")?Object(U.a)(Object(U.a)({},e),{},{user_info:Object(U.a)(Object(U.a)({},e.user_info),{},Object(j.a)({},n,t[n]))}):Object(U.a)(Object(U.a)({},e),{},Object(j.a)({},n,t[n]))}),{id:e.id,user_info:{}});i.push(n)})),i.pop(),n($(i,a))}))}}},addPostFB:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,n,i){var a=i.history,r=E.collection("post"),c=n().user.user,o={user_name:c.user_name,user_id:c.uid,user_profile:c.user_profile},s=Object(U.a)(Object(U.a)({},ie),{},{contents:e,insert_dt:M()().format("YYYY-MM-DD hh:mm:ss")}),u=n().image.preview;console.log(u),console.log(typeof u),y.ref("images/".concat(o.user_id,"_").concat((new Date).getTime())).putString(u,"data_url").then((function(e){e.ref.getDownloadURL().then((function(e){return console.log(e),e})).then((function(e){r.add(Object(U.a)(Object(U.a)(Object(U.a)({},o),s),{},{image_url:e})).then((function(n){var i=Object(U.a)(Object(U.a)({user_info:o},s),{},{id:n.id,image_url:e});t(ee(i)),a.replace("/"),t(H.setPreview(null))})).catch((function(e){window.alert("\uc557! \ud3ec\uc2a4\ud2b8 \uc791\uc131\uc5d0 \ubb38\uc81c\uac00 \uc788\uc5b4\uc694!"),console.log("post \uc791\uc131\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694!",e)}))})).catch((function(e){window.alert("\uc557! \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc\uc5d0 \ubb38\uc81c\uac00 \uc788\uc5b4\uc694!"),console.log("\uc557! \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc\uc5d0 \ubb38\uc81c\uac00 \uc788\uc5b4\uc694!",e)}))}))}},editPostFB:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,i,a){var r=a.history;if(e){var c=i().image.preview,o=i().post.list.findIndex((function(t){return t.id===e})),s=i().post.list[o],u=E.collection("post");if(c!==s.image_url){var l=i().user.user.uid;y.ref("images/".concat(l,"_").concat((new Date).getTime())).putString(c,"data_url").then((function(i){i.ref.getDownloadURL().then((function(e){return console.log(e),e})).then((function(i){u.doc(e).update(Object(U.a)(Object(U.a)({},t),{},{image_url:i})).then((function(a){n(te(e,Object(U.a)(Object(U.a)({},t),{},{image_url:i}))),r.replace("/")}))})).catch((function(e){window.alert("\uc557! \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc\uc5d0 \ubb38\uc81c\uac00 \uc788\uc5b4\uc694!"),console.log("\uc557! \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc\uc5d0 \ubb38\uc81c\uac00 \uc788\uc5b4\uc694!",e)}))}))}else u.doc(e).update(t).then((function(i){n(te(e,Object(U.a)({},t))),r.replace("/")}))}else console.log("\uac8c\uc2dc\ubb3c \uc815\ubcf4\uac00 \uc5c6\uc5b4\uc694!")}},getOnePostFB:function(e){return function(t,n,i){i.history;E.collection("post").doc(e).get().then((function(e){var n=e.data();if(n){var i=Object.keys(n).reduce((function(e,t){return-1!==t.indexOf("user_")?Object(U.a)(Object(U.a)({},e),{},{user_info:Object(U.a)(Object(U.a)({},e.user_info),{},Object(j.a)({},t,n[t]))}):Object(U.a)(Object(U.a)({},e),{},Object(j.a)({},t,n[t]))}),{id:e.id,user_info:{}});t($([i],{start:null,next:null,size:3}))}}))}}},ce="SET_COMMENT",oe="ADD_COMMENT",se="LOADING",ue=Object(b.a)(ce,(function(e,t){return{post_id:e,comment_list:t}})),le=Object(b.a)(oe,(function(e,t){return{post_id:e,comment:t}})),de=(Object(b.a)(se,(function(e){return{is_loading:e}})),Object(p.a)((_={},Object(j.a)(_,ce,(function(e,t){return Object(f.b)(e,(function(e){e.list[t.payload.post_id]=t.payload.comment_list}))})),Object(j.a)(_,oe,(function(e,t){return Object(f.b)(e,(function(e){e.list[t.payload.post_id].unshift(t.payload.comment)}))})),Object(j.a)(_,se,(function(e,t){return Object(f.b)(e,(function(e){e.is_loading=t.payload.is_loading}))})),_),{list:{},is_loading:!1})),je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t,n,i){i.history;e&&E.collection("comment").where("post_id","==",e).orderBy("insert_dt","desc").get().then((function(n){var i=[];n.forEach((function(e){i.push(Object(U.a)(Object(U.a)({},e.data()),{},{id:e.id}))})),t(ue(e,i))})).catch((function(t){console.log("\ub313\uae00 \uac00\uc838\uc624\uae30 \uc2e4\ud328!",e,t)}))}},be=function(e,t){return function(n,i,a){a.history;var r=E.collection("comment"),c=i().user.user,o={post_id:e,user_id:c.uid,user_name:c.user_name,user_profile:c.user_profile,contents:t,insert_dt:M()().format("YYYY-MM-DD hh:mm:ss")};r.add(o).then((function(t){var a=E.collection("post"),r=i().post.list.find((function(t){return t.id===e})),c=g.a.firestore.FieldValue.increment(1);o=Object(U.a)(Object(U.a)({},o),{},{id:t.id}),a.doc(e).update({comment_cnt:c}).then((function(t){n(le(e,o)),r&&n(re.editPost(e,{comment_cnt:parseInt(r.comment_cnt)+1}))}))}))}},pe=Object(d.a)(),fe=Object(u.b)({user:T,post:ae,image:X,comment:de,router:Object(s.b)(pe)}),ge=[l.a.withExtraArgument({history:pe})],xe=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):u.c)(u.a.apply(void 0,ge)),he=Object(u.d)(fe,xe),me=n(11),Oe=n(12),_e=n(1),ve=function(e){var t=e.is_flex,n=e.width,i=e.margin,r=e.padding,c=e.bg,o=e.children,s=e.center,u=e._onClick,l={is_flex:t,width:n,padding:r,margin:i,bg:c,center:s};return Object(_e.jsx)(a.a.Fragment,{children:Object(_e.jsx)(ke,Object(U.a)(Object(U.a)({},l),{},{onClick:u,children:o}))})};ve.defaultProps={children:null,is_flex:!1,width:"100%",padding:!1,margin:!1,bg:!1,center:!1,_onClick:function(){}};var Ce,we,Ee,ye,ke=Oe.a.div(v||(v=Object(me.a)(["\n    width: ",";\n    height: 100%;\n    box-sizing: border-box;\n    ","\n    ","\n    ","\n    ","\n    "," \n"])),(function(e){return e.width}),(function(e){return e.padding?"padding : ".concat(e.padding,";"):""}),(function(e){return e.margin?"margin : ".concat(e.margin,";"):""}),(function(e){return e.bg?"background-color: ".concat(e.bg,";"):""}),(function(e){return e.is_flex?"display: flex; align-items: center; justify-content: space-between":""}),(function(e){return e.center?"text-align: center;":""})),ze=ve,Fe=function(e){var t=e.shape,n={src:e.src,size:e.size};return"circle"===t?Object(_e.jsx)(Ie,Object(U.a)({},n)):"rectangle"===t?Object(_e.jsx)(Te,{children:Object(_e.jsx)(De,Object(U.a)({},n))}):Object(_e.jsx)(a.a.Fragment,{children:Object(_e.jsx)(Se,Object(U.a)({},n))})};Fe.defaultProps={shape:"circle",src:"https://mean0images.s3.ap-northeast-2.amazonaws.com/4.jpeg",size:36};var Pe,Se=Oe.a.div(Ce||(Ce=Object(me.a)(["\n  --size: ",'px;\n  width: var(--size);\n  height: var(--size);\n  background-image: url("','");\n  background-size: cover;\n'])),(function(e){return e.size}),(function(e){return e.src})),Te=Oe.a.div(we||(we=Object(me.a)(["\n    width: 100%;\n    min-width: 250px;\n"]))),De=Oe.a.div(Ee||(Ee=Object(me.a)(['\n    position: relative;\n    padding-top: 75%;\n    overflow: hidden;\n    background-image: url("','");\n    background-size: cover;\n'])),(function(e){return e.src})),Ie=Oe.a.div(ye||(ye=Object(me.a)(["\n    --size: ",'px;\n    width: var(--size);\n    height: var(--size);\n    border-radius: var(--size);\n\n    background-image: url("','");\n    background-size: cover;\n    margin: 4px;\n'])),(function(e){return e.size}),(function(e){return e.src})),Ae=Fe,Ne=function(e){var t=e.bold,n=e.color,i=e.size,a=e.children,r={bold:t,color:n,size:i,margin:e.margin};return Object(_e.jsx)(Be,Object(U.a)(Object(U.a)({},r),{},{children:a}))};Ne.defaultProps={children:null,bold:!1,color:"#222831",size:"14px",margin:!1};var Le,Ue,Be=Oe.a.p(Pe||(Pe=Object(me.a)(["\n  color: ",";\n  font-size: ",";\n  font-weight: ",";\n  ",";\n"])),(function(e){return e.color}),(function(e){return e.size}),(function(e){return e.bold?"600":"400"}),(function(e){return e.margin?"margin : ".concat(e.margin,";"):""})),Me=Ne,Ye=function(e){var t=e.label,n=e.placeholder,i=e._onChange,r=e.type,c=e.multiLine,o=e.value,s=e.is_submit,u=e.onSubmit;return c?Object(_e.jsxs)(ze,{children:[t&&Object(_e.jsx)(Me,{margin:"0px",children:t}),Object(_e.jsx)(Ve,{rows:10,value:o,placeholder:n,onChange:i})]}):Object(_e.jsx)(a.a.Fragment,{children:Object(_e.jsxs)(ze,{children:[t&&Object(_e.jsx)(Me,{margin:"0px",children:t}),s?Object(_e.jsx)(We,{type:r,placeholder:n,onChange:i,value:o,onKeyPress:function(e){"Enter"===e.key&&u(e)}}):Object(_e.jsx)(We,{type:r,placeholder:n,onChange:i})]})})};Ye.defaultProps={multiLine:!1,label:!1,placeholder:"\ud14d\uc2a4\ud2b8\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.",type:"text",value:"",is_submit:!1,onSubmit:function(){},_onChange:function(){}};var Re,Ge,Ve=Oe.a.textarea(Le||(Le=Object(me.a)(["\n  border: 1px solid #212121;\n  width: 100%;\n  padding: 12px 4px;\n  box-sizing: border-box;\n"]))),We=Oe.a.input(Ue||(Ue=Object(me.a)(["\n  border: 1px solid #212121;\n  width: 100%;\n  padding: 12px 4px;\n  box-sizing: border-box;\n"]))),Ze=Ye,Xe=function(e){var t=e.text,n=e._onClick,i=e.is_float,r=e.children,c=e.margin,o=e.width;if(i)return Object(_e.jsx)(a.a.Fragment,{children:Object(_e.jsx)(qe,{onClick:n,children:t||r})});var s={margin:c,width:o};return Object(_e.jsx)(a.a.Fragment,{children:Object(_e.jsx)(Ke,Object(U.a)(Object(U.a)({},s),{},{onClick:n,children:t||r}))})};Xe.defaultProps={text:!1,children:null,_onClick:function(){},is_float:!1,margin:!1,width:"100%"};var He,Je,Ke=Oe.a.button(Re||(Re=Object(me.a)(["\n  width: ",";\n  background-color: #817f7f;\n  color: #ffffff;\n  padding: 12px 0px;\n  box-sizing: border-box;\n  border: none;\n  ",";\n"])),(function(e){return e.width}),(function(e){return e.margin?"margin: ".concat(e.margin,";"):""})),qe=Oe.a.button(Ge||(Ge=Object(me.a)(["\n  width: 50px;\n  height: 50px;\n  background-color: #212121;\n  color: #ffffff;\n  box-sizing: border-box;\n  font-size: 36px;\n  font-weight: 500;\n  position: fixed;\n  bottom: 50px;\n  right: 16px;\n  text-align: center;\n  border: none;\n  border-radius: 50px;\n  align-items: center;\n  justify-content: center;\n  vertical-align: middle;\n"]))),Qe=Xe,$e=function(e){var t=e.type,n=e.size,i=e.is_dim;return Object(_e.jsx)(a.a.Fragment,{children:Object(_e.jsx)(et,{type:t,is_dim:i,children:Object(_e.jsx)(tt,{size:n})})})};$e.defaultProps={type:"inline",is_dim:!1,size:60};var et=Oe.a.div(He||(He=Object(me.a)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px 0;\n  ","\n  ","\n"])),(function(e){return"page"===e.type?"position: fixed;\n        height: 95vh;\n        top: 0;\n        left: 0;\n        padding: 0;\n        zIndex: 9999;":""}),(function(e){return e.is_dim?"\n     background: rgba(0,0,0,0.4); \n     height: 100vh;\n  ":""})),tt=Oe.a.div(Je||(Je=Object(me.a)(["\n  --size: ","px;\n  width: var(--size);\n  height: var(--size);\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' style='margin: auto; background: none; display: block; shape-rendering: auto;' width='200px' height='200px' viewBox='0 0 100 100' preserveAspectRatio='xMidYMid'%3E%3Cg transform='rotate(0 50 50)'%3E%3Crect x='47' y='24' rx='3' ry='3.36' width='6' height='12' fill='%23222222'%3E%3Canimate attributeName='opacity' values='1;0' keyTimes='0;1' dur='1s' begin='-0.9166666666666666s' repeatCount='indefinite'%3E%3C/animate%3E%3C/rect%3E%3C/g%3E%3Cg transform='rotate(30 50 50)'%3E%3Crect x='47' y='24' rx='3' ry='3.36' width='6' height='12' fill='%23222222'%3E%3Canimate attributeName='opacity' values='1;0' keyTimes='0;1' dur='1s' begin='-0.8333333333333334s' repeatCount='indefinite'%3E%3C/animate%3E%3C/rect%3E%3C/g%3E%3Cg transform='rotate(60 50 50)'%3E%3Crect x='47' y='24' rx='3' ry='3.36' width='6' height='12' fill='%23222222'%3E%3Canimate attributeName='opacity' values='1;0' keyTimes='0;1' dur='1s' begin='-0.75s' repeatCount='indefinite'%3E%3C/animate%3E%3C/rect%3E%3C/g%3E%3Cg transform='rotate(90 50 50)'%3E%3Crect x='47' y='24' rx='3' ry='3.36' width='6' height='12' fill='%23222222'%3E%3Canimate attributeName='opacity' values='1;0' keyTimes='0;1' dur='1s' begin='-0.6666666666666666s' repeatCount='indefinite'%3E%3C/animate%3E%3C/rect%3E%3C/g%3E%3Cg transform='rotate(120 50 50)'%3E%3Crect x='47' y='24' rx='3' ry='3.36' width='6' height='12' fill='%23222222'%3E%3Canimate attributeName='opacity' values='1;0' keyTimes='0;1' dur='1s' begin='-0.5833333333333334s' repeatCount='indefinite'%3E%3C/animate%3E%3C/rect%3E%3C/g%3E%3Cg transform='rotate(150 50 50)'%3E%3Crect x='47' y='24' rx='3' ry='3.36' width='6' height='12' fill='%23222222'%3E%3Canimate attributeName='opacity' values='1;0' keyTimes='0;1' dur='1s' begin='-0.5s' repeatCount='indefinite'%3E%3C/animate%3E%3C/rect%3E%3C/g%3E%3Cg transform='rotate(180 50 50)'%3E%3Crect x='47' y='24' rx='3' ry='3.36' width='6' height='12' fill='%23222222'%3E%3Canimate attributeName='opacity' values='1;0' keyTimes='0;1' dur='1s' begin='-0.4166666666666667s' repeatCount='indefinite'%3E%3C/animate%3E%3C/rect%3E%3C/g%3E%3Cg transform='rotate(210 50 50)'%3E%3Crect x='47' y='24' rx='3' ry='3.36' width='6' height='12' fill='%23222222'%3E%3Canimate attributeName='opacity' values='1;0' keyTimes='0;1' dur='1s' begin='-0.3333333333333333s' repeatCount='indefinite'%3E%3C/animate%3E%3C/rect%3E%3C/g%3E%3Cg transform='rotate(240 50 50)'%3E%3Crect x='47' y='24' rx='3' ry='3.36' width='6' height='12' fill='%23222222'%3E%3Canimate attributeName='opacity' values='1;0' keyTimes='0;1' dur='1s' begin='-0.25s' repeatCount='indefinite'%3E%3C/animate%3E%3C/rect%3E%3C/g%3E%3Cg transform='rotate(270 50 50)'%3E%3Crect x='47' y='24' rx='3' ry='3.36' width='6' height='12' fill='%23222222'%3E%3Canimate attributeName='opacity' values='1;0' keyTimes='0;1' dur='1s' begin='-0.16666666666666666s' repeatCount='indefinite'%3E%3C/animate%3E%3C/rect%3E%3C/g%3E%3Cg transform='rotate(300 50 50)'%3E%3Crect x='47' y='24' rx='3' ry='3.36' width='6' height='12' fill='%23222222'%3E%3Canimate attributeName='opacity' values='1;0' keyTimes='0;1' dur='1s' begin='-0.08333333333333333s' repeatCount='indefinite'%3E%3C/animate%3E%3C/rect%3E%3C/g%3E%3Cg transform='rotate(330 50 50)'%3E%3Crect x='47' y='24' rx='3' ry='3.36' width='6' height='12' fill='%23222222'%3E%3Canimate attributeName='opacity' values='1;0' keyTimes='0;1' dur='1s' begin='0s' repeatCount='indefinite'%3E%3C/animate%3E%3C/rect%3E%3C/g%3E%3C/svg%3E\");\n  background-size: var(--size);\n"])),(function(e){return e.size})),nt=$e,it=function(e){return Object(_e.jsx)(a.a.Fragment,{children:Object(_e.jsxs)(ze,{children:[Object(_e.jsxs)(ze,{is_flex:!0,padding:"16px",children:[Object(_e.jsxs)(ze,{is_flex:!0,width:"auto",children:[Object(_e.jsx)(Ae,{shape:"circle",src:e.src}),Object(_e.jsx)(Me,{bold:!0,children:e.user_info.user_name})]}),Object(_e.jsxs)(ze,{is_flex:!0,width:"auto",children:[e.is_me&&Object(_e.jsx)(Qe,{width:"auto",padding:"4px",margin:"4px",_onClick:function(){pe.push("/write/".concat(e.id))},children:"\uc218\uc815"}),Object(_e.jsx)(Me,{children:e.insert_dt})]})]}),Object(_e.jsx)(ze,{padding:"16px",children:Object(_e.jsx)(Me,{children:e.contents})}),Object(_e.jsx)(ze,{children:Object(_e.jsx)(Ae,{shape:"rectangle",src:e.image_url})}),Object(_e.jsx)(ze,{padding:"16px",children:Object(_e.jsxs)(Me,{margin:"0px",bold:!0,children:["\ub313\uae00 ",e.comment_cnt,"\uac1c"]})})]})})};it.defaultProps={user_info:{user_name:"mean0",user_profile:"https://mean0images.s3.ap-northeast-2.amazonaws.com/4.jpeg"},image_url:"https://mean0images.s3.ap-northeast-2.amazonaws.com/4.jpeg",contents:"\uace0\uc591\uc774\ub124\uc694!",comment_cnt:10,insert_dt:"2021-02-27 10:00:00",is_me:!1};var at=it,rt=n(6),ct=n(31),ot=n.n(ct),st=function(e){e.children;var t=e.callNext,n=e.is_next,i=e.loading,r=ot.a.throttle((function(){if(!i){var e=window.innerHeight;document.body.scrollHeight-e-(document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop)<200&&t()}}),300),c=a.a.useCallback(r,[i]);return a.a.useEffect((function(){if(!i)return n?window.addEventListener("scroll",c):window.removeEventListener("scroll",c),function(){return window.removeEventListener("scroll",c)}}),[n,i]),Object(_e.jsxs)(a.a.Fragment,{children:[e.children,n&&Object(_e.jsx)(nt,{})]})};st.defaultProps={children:null,callNext:function(){},is_next:!1,loading:!1};var ut=st,lt=function(e){var t=Object(rt.d)(),n=Object(rt.e)((function(e){return e.post.list})),i=Object(rt.e)((function(e){return e.user.user})),r=Object(rt.e)((function(e){return e.post.is_loading})),c=Object(rt.e)((function(e){return e.post.paging})),o=e.history;return a.a.useEffect((function(){n.length<2&&t(re.getPostFB())}),[]),Object(_e.jsx)(a.a.Fragment,{children:Object(_e.jsx)(ze,{bg:"#EFF6FF",padding:"20px 0px 20px 0px",children:Object(_e.jsx)(ut,{callNext:function(){t(re.getPostFB(c.next))},is_next:!!c.next,loading:r,children:n.map((function(e,t){return e.user_info.user_id===(null===i||void 0===i?void 0:i.uid)?Object(_e.jsx)(ze,{bg:"#ffffff",margin:"0px 0px 20px 0px",_onClick:function(){o.push("/post/".concat(e.id))},children:Object(_e.jsx)(at,Object(U.a)(Object(U.a)({},e),{},{is_me:!0}),e.id)}):Object(_e.jsx)(ze,{bg:"#ffffff",margin:"0px 0px 20px 0px",_onClick:function(){o.push("/post/".concat(e.id))},children:Object(_e.jsx)(at,Object(U.a)({},e),e.id)})}))})})})},dt=n(15),jt=function(e){return/^[0-9a-zA-Z]([-_.0-9a-zA-Z])*@[0-9a-zA-Z]([-_.0-9a-zA-Z])*.([a-zA-Z])*/.test(e)},bt=function(e){var t=Object(rt.d)(),n=a.a.useState(""),i=Object(dt.a)(n,2),r=i[0],c=i[1],o=a.a.useState(""),s=Object(dt.a)(o,2),u=s[0],l=s[1];return Object(_e.jsx)(a.a.Fragment,{children:Object(_e.jsxs)(ze,{padding:"16px",children:[Object(_e.jsx)(Me,{size:"32px",bold:!0,children:"\ub85c\uadf8\uc778"}),Object(_e.jsx)(ze,{padding:"16px 0px",children:Object(_e.jsx)(Ze,{label:"\uc544\uc774\ub514",placeholder:"\uc544\uc774\ub514\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.",_onChange:function(e){c(e.target.value)}})}),Object(_e.jsx)(ze,{padding:"16px 0px",children:Object(_e.jsx)(Ze,{label:"\ud328\uc2a4\uc6cc\ub4dc",placeholder:"\ud328\uc2a4\uc6cc\ub4dc \uc785\ub825\ud574\uc8fc\uc138\uc694.",type:"password",_onChange:function(e){l(e.target.value)}})}),Object(_e.jsx)(Qe,{text:"\ub85c\uadf8\uc778\ud558\uae30",_onClick:function(){console.log("\ub85c\uadf8\uc778 \ud588\uc5b4!"),console.log(r),""!==r&&""!==u?jt(r)?t(I(r,u)):window.alert("\uc774\uba54\uc77c \ud615\uc2dd\uc774 \ub9de\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4!"):window.alert("\uc544\uc774\ub514 \ud639\uc740 \ube44\ubc00\ubc88\ud638\uac00 \uacf5\ub780\uc785\ub2c8\ub2e4! \uc785\ub825\ud574\uc8fc\uc138\uc694!")}})]})})},pt=function(e){var t=Object(rt.d)(),n=a.a.useState(""),i=Object(dt.a)(n,2),r=i[0],c=i[1],o=a.a.useState(""),s=Object(dt.a)(o,2),u=s[0],l=s[1],d=a.a.useState(""),j=Object(dt.a)(d,2),b=j[0],p=j[1],f=a.a.useState(""),g=Object(dt.a)(f,2),x=g[0],h=g[1];return Object(_e.jsx)(a.a.Fragment,{children:Object(_e.jsxs)(ze,{padding:"16px",children:[Object(_e.jsx)(Me,{size:"32px",bold:!0,children:"\ud68c\uc6d0\uac00\uc785"}),Object(_e.jsx)(ze,{padding:"16px 0px",children:Object(_e.jsx)(Ze,{label:"\uc544\uc774\ub514",placeholder:"\uc544\uc774\ub514\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.",_onChange:function(e){c(e.target.value)}})}),Object(_e.jsx)(ze,{padding:"16px 0px",children:Object(_e.jsx)(Ze,{label:"\ub2c9\ub124\uc784",placeholder:"\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",_onChange:function(e){h(e.target.value)}})}),Object(_e.jsx)(ze,{padding:"16px 0px",children:Object(_e.jsx)(Ze,{label:"\ube44\ubc00\ubc88\ud638",placeholder:"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.",_onChange:function(e){l(e.target.value)}})}),Object(_e.jsx)(ze,{padding:"16px 0px",children:Object(_e.jsx)(Ze,{label:"\ube44\ubc00\ubc88\ud638 \ud655\uc778",placeholder:"\ube44\ubc00\ubc88\ud638\ub97c \ub2e4\uc2dc \uc785\ub825\ud574\uc8fc\uc138\uc694.",_onChange:function(e){p(e.target.value)}})}),Object(_e.jsx)(Qe,{text:"\ud68c\uc6d0\uac00\uc785\ud558\uae30",_onClick:function(){""!==r&&""!==u&&""!==x?jt(r)?u===b?t(D(r,u,x)):window.alert("\ud328\uc2a4\uc6cc\ub4dc\uc640 \ud328\uc2a4\uc6cc\ub4dc \ud655\uc778\uc774 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4!"):window.alert("\uc774\uba54\uc77c \ud615\uc2dd\uc774 \ub9de\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4!"):window.alert("\uc544\uc774\ub514, \ud328\uc2a4\uc6cc\ub4dc, \ub2c9\ub124\uc784\uc744 \ubaa8\ub450 \uc785\ub825\ud574\uc8fc\uc138\uc694!")}})]})})};pt.defaultProps={};var ft=pt,gt=function(e){var t=Object(rt.d)(),n=Object(rt.e)((function(e){return e.image.uploading})),i=a.a.useRef();return Object(_e.jsxs)(a.a.Fragment,{children:[Object(_e.jsx)("input",{type:"file",onChange:function(e){console.log(e),console.log(e.target),console.log(e.target.files),console.log(i.current.files[0]);var n=new FileReader,a=e.target.files[0];n.readAsDataURL(a),n.onloadend=function(){console.log(n.result),t(H.setPreview(n.result))}},ref:i,disabled:n}),Object(_e.jsx)(Qe,{_onClick:function(){if(i.current&&0!==i.current.files.length){var e=i.current.files[0];t(H.uploadImageFB(e))}else window.alert("\ud30c\uc77c\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694!")},children:"\uc5c5\ub85c\ub4dc \ud558\uae30"})]})},xt=function(e){var t=Object(rt.d)(),n=Object(rt.e)((function(e){return e.user.is_login})),i=Object(rt.e)((function(e){return e.image.preview})),r=Object(rt.e)((function(e){return e.post.list})),c=e.match.params.id,o=!!c,s=e.history,u=o?r.find((function(e){return e.id===c})):null,l=a.a.useState(u?u.contents:""),d=Object(dt.a)(l,2),j=d[0],b=d[1];a.a.useEffect((function(){!o||u?o&&t(H.setPreview(u.image_url)):s.goBack()}),[]);return n?Object(_e.jsxs)(a.a.Fragment,{children:[Object(_e.jsxs)(ze,{padding:"16px",children:[Object(_e.jsx)(Me,{margin:"0px",size:"36px",bold:!0,children:o?"\uac8c\uc2dc\uae00 \uc218\uc815":"\uac8c\uc2dc\uae00 \uc791\uc131"}),Object(_e.jsx)(gt,{})]}),Object(_e.jsxs)(ze,{children:[Object(_e.jsx)(ze,{padding:"16px",children:Object(_e.jsx)(Me,{margin:"0px",size:"24px",bold:!0,children:"\ubbf8\ub9ac\ubcf4\uae30"})}),Object(_e.jsx)(Ae,{shape:"rectangle",src:i||"http://via.placeholder.com/400x300"})]}),Object(_e.jsx)(ze,{padding:"16px",children:Object(_e.jsx)(Ze,{value:j,_onChange:function(e){b(e.target.value)},label:"\uac8c\uc2dc\uae00 \ub0b4\uc6a9",placeholder:"\uac8c\uc2dc\uae00 \uc791\uc131",multiline:!0})}),Object(_e.jsx)(ze,{padding:"16px",children:o?Object(_e.jsx)(Qe,{text:"\uac8c\uc2dc\uae00 \uc218\uc815",_onClick:function(){t(re.editPostFB(c,{contents:j}))}}):Object(_e.jsx)(Qe,{text:"\uac8c\uc2dc\uae00 \uc791\uc131",_onClick:function(){t(re.addPostFB(j))}})})]}):Object(_e.jsxs)(ze,{margin:"100px 0px",padding:"16px",center:!0,children:[Object(_e.jsx)(Me,{size:"32px",bold:!0,children:"\uc557! \uc7a0\uae50!"}),Object(_e.jsx)(Me,{size:"16px",children:"\ub85c\uadf8\uc778 \ud6c4\uc5d0\ub9cc \uae00\uc744 \uc4f8 \uc218 \uc788\uc5b4\uc694!"}),Object(_e.jsx)(Qe,{_onClick:function(){s.replace("/")},children:"\ub85c\uadf8\uc778 \ud558\ub7ec\uac00\uae30"})]})},ht=function(e){var t=Object(rt.d)(),n=Object(rt.e)((function(e){return e.comment.list})),i=e.post_id;return a.a.useEffect((function(){n[i]||t(je(i))}),[]),n[i]&&i?Object(_e.jsx)(a.a.Fragment,{children:Object(_e.jsx)(ze,{padding:"16px",children:n[i].map((function(e){return Object(_e.jsx)(Ot,Object(U.a)({},e),e.id)}))})}):null};ht.defaultProps={post_id:null};var mt=ht,Ot=function(e){e.user_profile;var t=e.user_name,n=(e.user_id,e.post_id,e.contents),i=e.insert_dt;return Object(_e.jsxs)(ze,{is_flex:!0,children:[Object(_e.jsxs)(ze,{is_flex:!0,width:"auto",children:[Object(_e.jsx)(Ae,{shape:"circle"}),Object(_e.jsx)(Me,{bold:!0,children:t})]}),Object(_e.jsxs)(ze,{is_flex:!0,margin:"0px 4px",children:[Object(_e.jsx)(Me,{margin:"0px",children:n}),Object(_e.jsx)(Me,{margin:"0px",children:i})]})]})};Ot.defaultProps={user_profile:"",user_name:"mean0",user_id:"",post_id:1,contents:"\uadc0\uc5ec\uc6b4 \uace0\uc591\uc774\ub124\uc694!",insert_dt:"2021-01-01 19:00:00"};var _t=function(e){var t=Object(rt.d)(),n=e.post_id,i=a.a.useState(""),r=Object(dt.a)(i,2),c=r[0],o=r[1],s=function(){""!==c?(o(""),t(be(n,c))):window.alert("\ub313\uae00\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694!")};return Object(_e.jsx)(a.a.Fragment,{children:Object(_e.jsxs)(ze,{padding:"16px",is_flex:!0,children:[Object(_e.jsx)(Ze,{placeholder:"\ub313\uae00 \ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694 :)",_onChange:function(e){o(e.target.value)},value:c,onSubmit:s,is_submit:!0}),Object(_e.jsx)(Qe,{width:"50px",margin:"0px 2px 0px 2px",_onClick:s,children:"\uc791\uc131"})]})})};_t.defaultProps={post_id:""};var vt=_t,Ct=function(e){var t=Object(rt.e)((function(e){return e.user.user})),n="firebase:authUser:".concat(C,":[DEFAULT]");return!!sessionStorage.getItem(n)&&t?Object(_e.jsx)(a.a.Fragment,{children:e.children}):null},wt=function(e){var t=Object(rt.d)(),n=e.match.params.id,i=Object(rt.e)((function(e){return e.user.user})),r=Object(rt.e)((function(e){return e.post.list})),c=r.findIndex((function(e){return e.id===n})),o=r[c];return a.a.useEffect((function(){o||t(re.getOnePostFB(n))}),[]),Object(_e.jsxs)(a.a.Fragment,{children:[o&&Object(_e.jsx)(at,Object(U.a)(Object(U.a)({},o),{},{is_me:o.user_info.user_id===(null===i||void 0===i?void 0:i.uid)})),Object(_e.jsx)(Ct,{children:Object(_e.jsx)(vt,{post_id:n})}),Object(_e.jsx)(mt,{post_id:n})]})},Et=function(e){var t=a.a.useState(""),n=Object(dt.a)(t,2),i=n[0],r=n[1],c=ot.a.debounce((function(e){console.log("debounce ::: ",e.target.value)}),1e3),o=(ot.a.throttle((function(e){console.log("throttle ::: ",e.target.value)}),1e3),a.a.useCallback(c,[]));return Object(_e.jsx)("div",{children:Object(_e.jsx)("input",{type:"text",onChange:function(e){r(e.target.value),o(e)},value:i})})},yt=function(e){var t=Object(rt.d)(),n=Object(rt.e)((function(e){return e.user.user})),i="firebase:authUser:".concat(C,":[DEFAULT]"),r=!!sessionStorage.getItem(i);return n&&r?Object(_e.jsx)(a.a.Fragment,{children:Object(_e.jsxs)(ze,{is_flex:!0,padding:"4px 16px",children:[Object(_e.jsx)(ze,{children:Object(_e.jsx)(Me,{margin:"0px",size:"24px",bold:!0,children:"Onstagram"})}),Object(_e.jsxs)(ze,{is_flex:!0,children:[Object(_e.jsx)(Qe,{text:"\ub0b4\uc815\ubcf4"}),Object(_e.jsx)(Qe,{text:"\uc54c\ub9bc",_onClick:function(){pe.push("/noti")}}),Object(_e.jsx)(Qe,{text:"\ub85c\uadf8\uc544\uc6c3",_onClick:function(){t(N({}))}})]})]})}):Object(_e.jsx)(a.a.Fragment,{children:Object(_e.jsxs)(ze,{is_flex:!0,padding:"4px 16px",children:[Object(_e.jsx)(ze,{children:Object(_e.jsx)(Me,{margin:"0px",size:"24px",bold:!0,children:"\ud5ec\ub85c"})}),Object(_e.jsxs)(ze,{is_flex:!0,children:[Object(_e.jsx)(Qe,{text:"\ub85c\uadf8\uc778",_onClick:function(){pe.push("/login")}}),Object(_e.jsx)(Qe,{text:"\ud68c\uc6d0\uac00\uc785",_onClick:function(){pe.push("/signup")}})]})]})})};yt.defaultProps={};var kt=yt,zt=function(e){e.image_url;var t=e.user_name;e.post_id;return Object(_e.jsx)(a.a.Fragment,{children:Object(_e.jsxs)(ze,{padding:"16px",is_flex:!0,bg:"#ffffff",margin:"8px 0px",children:[Object(_e.jsx)(ze,{width:"auto",margin:"0px 8px 0px 0px",children:Object(_e.jsx)(Ae,{size:85,shape:"square"})}),Object(_e.jsx)(ze,{children:Object(_e.jsxs)(Me,{children:[Object(_e.jsx)("b",{children:t}),"\ub2d8\uc774 \uac8c\uc2dc\uae00\uc5d0 \ub313\uae00\uc744 \ub0a8\uacbc\uc2b5\ub2c8\ub2e4."]})})]})})};zt.defaultProps={image_url:"",user_name:"",post_id:null};var Ft=zt,Pt=function(e){return Object(_e.jsx)(a.a.Fragment,{children:Object(_e.jsx)(ze,{padding:"16px",bg:"#EFF6FF",children:[{user_name:"aaaaaa",post_id:"post1",image_url:""},{user_name:"aaaaaa",post_id:"post1",image_url:""},{user_name:"aaaaaa",post_id:"post1",image_url:""},{user_name:"aaaaaa",post_id:"post1",image_url:""},{user_name:"aaaaaa",post_id:"post1",image_url:""},{user_name:"aaaaaa",post_id:"post1",image_url:""},{user_name:"aaaaaa",post_id:"post1",image_url:""}].map((function(e){return Object(_e.jsx)(Ft,Object(U.a)({},e),e.post_id)}))})})};var St=function(){var e=Object(rt.d)(),t="firebase:authUser:".concat(C,":[DEFAULT]"),n=!!sessionStorage.getItem(t);return a.a.useEffect((function(){n&&e(A())}),[]),Object(_e.jsxs)(a.a.Fragment,{children:[Object(_e.jsxs)(ze,{children:[Object(_e.jsx)(kt,{}),Object(_e.jsxs)(s.a,{history:pe,children:[Object(_e.jsx)(o.a,{path:"/",exact:!0,component:lt}),Object(_e.jsx)(o.a,{path:"/Onstagram",exact:!0,component:lt}),Object(_e.jsx)(o.a,{path:"/login",exact:!0,component:bt}),Object(_e.jsx)(o.a,{path:"/signup",exact:!0,component:ft}),Object(_e.jsx)(o.a,{path:"/write",exact:!0,component:xt}),Object(_e.jsx)(o.a,{path:"/write/:id",exact:!0,component:xt}),Object(_e.jsx)(o.a,{path:"/post/:id",exact:!0,component:wt}),Object(_e.jsx)(o.a,{path:"/search",exact:!0,component:Et}),Object(_e.jsx)(o.a,{path:"/noti",exact:!0,component:Pt})]})]}),Object(_e.jsx)(Ct,{children:Object(_e.jsx)(Qe,{is_float:!0,text:"+",_onClick:function(){pe.push("/write")}})})]})},Tt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),r(e),c(e)}))};c.a.render(Object(_e.jsx)(rt.a,{store:he,children:Object(_e.jsx)(St,{})}),document.getElementById("root")),Tt()}},[[65,1,2]]]);
//# sourceMappingURL=main.a4380049.chunk.js.map